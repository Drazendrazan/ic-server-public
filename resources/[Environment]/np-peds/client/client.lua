pedList = {

    --- Tool Shops ---

	{
		model = `ig_russiandrunk`,
		coords = vector3(46.663803100586, -1749.6798095703, 29.633134841919), 
		heading = 50.0, 
		gender = "male", 
	},

	{
		model = `ig_russiandrunk`,
		coords = vector3(2747.2646484375, 3473.0026855469, 55.670021057129), 
		heading = 243.0, 
		gender = "male", 
	},

	--- Gun Shops --- 
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(-330.94049072266,6085.6987304688,31.454765319824), --GREAT OCEAN HWY
		heading = 200.0, 
		gender = "male", 
	},


	{
		model = `mp_m_exarmy_01`,
		coords = vector3(-1304.0030517578,-395.48287963867,36.695762634277), --North Rockford
		heading = 68.95, 
		gender = "male", 
	},
	
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(1692.8041992188,3762.0256347656,34.705307006836), --SANDY SHORES
		heading = 200.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(-1118.6530761719,2700.1198730469,18.554126739502), --ROUTE 68
		heading = 200.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(2566.9831542969,292.54681396484,108.73484802246), --PALOMINO FWY
		heading = 0.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(253.47956848145,-51.635822296143,69.941047668457), --SPANISH AVE
		heading = 80.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(-661.20977783203,-933.51782226562,21.829214096069), --PALOMINO AVE
		heading = 160.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(841.49786376953,-1035.3450927734,28.194841384888), --ELGIN AVE
		heading = 340.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(23.803026199341,-1105.8958740234,29.797002792358), --OLYMPIC FWY
		heading = 120.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_exarmy_01`,
		coords = vector3(809.4541015625,-2159.08203125,29.618989944458), --POPULAR ST
		heading = 0.0, 
		gender = "male", 
	},


	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(1959.8098144531,3739.9448242188,32.343730926514), --SANDY SHORES
		heading = 300.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(1727.6480712891,6414.8471679688,35.037208557129), --SENORA FWY NORTH
		heading = 250.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(1698.0328369141,4922.8530273438,42.063625335693), --GRAPESEED MAIN ST
		heading = 320.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(2678.1499023438,3279.2724609375,55.241111755371), --SONORA FWY EAST
		heading = 320.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(549.04553222656,2671.5649414062,42.156478881836), --HARMONY WEST
		heading = 100.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(-3242.2836914062,999.92767333984,12.830716133118), --BARBARENO RD
		heading = 10.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(-1819.2338867188,793.30694580078,138.08335876465), --RICHMAN GLEN
		heading = 120.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(-3038.8520507812,584.50695800781,7.9089326858521), --INESENO RD
		heading = 10.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(372.544921875,326.61099243164,103.56636047363), --CLINTON AVE VINEWOOD
		heading = 250.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(2557.1782226562,380.76174926758,108.62292480469), --PALOMINO FWY
		heading = 340.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(1165.0246582031,-324.23849487305,69.205039978027), --WEST MIRROR DR
		heading = 90.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(-706.06341552734,-914.91168212891,19.215585708618), --PALOMINO AVE
		heading = 90.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(24.404470443726,-1347.4686279297,29.497045516968), --INNOCENCE BLVD
		heading = 270.0, 
		gender = "male", 
	},
	
	{
		model = `mp_m_shopkeep_01`,
		coords = vector3(-47.652774810791,-1759.0969238281,29.420993804932), --DAVIS AVE
		heading = 50.0, 
		gender = "male", 
	},

	--- Robs Liqour ---

	{
		model = `ig_omega`,
		coords = vector3(1392.5979003906,3606.3920898438,34.980934143066), --SANDY SHORES
		heading = 200.0, 
		gender = "male", 
	},
	
	{
		model = `ig_omega`,
		coords = vector3(1165.7758789062,2710.8713378906,38.157657623291), --HARMONY
		heading = 200.0, 
		gender = "male", 
	},
	
	{
		model = `ig_omega`,
		coords = vector3(-2966.3356933594,391.17147827148,15.043302536011), --HARMONY
		heading = 100.0, 
		gender = "male", 
	},
	
	{
		model = `ig_omega`,
		coords = vector3(-1486.4750976562,-377.71398925781,40.163383483887), --PROSPERITY ST
		heading = 130.0, 
		gender = "male", 
	},
	
	{
		model = `ig_omega`,
		coords = vector3(-1221.6925048828,-908.20947265625,12.326344490051), --SAN ANDREAS AVE
		heading = 20.0, 
		gender = "male", 
	},
	
	{
		model = `ig_omega`,
		coords = vector3(1134.2102050781,-982.88604736328,46.415798187256), --EL RANCHO BLVD
		heading = 300.0, 
		gender = "male", 
	},

	{
		model = `a_m_m_farmer_01`,
		coords = vector3(2388.1337890625, 5044.4125976562, 46.298980712891), -- (Chicken Start)
		heading = 200.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `a_m_m_indian_01`,
		coords = vector3(-591.47741699219, -892.47906494141, 25.943695068359), -- (Chicken Sell)
		heading = 100.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `s_m_y_factory_01`,
		coords = vector3(-98.654586791992, 6205.0146484375, 31.025030136108), -- (Chicken Cut)
		heading = 52.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_STAND_FIRE",
	},

	{
		model = `ig_cletus`,
		coords = vector3(1085.2561035156, -2002.2645263672, 31.392595291138), -- (Mining Melt)
		heading = 41.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `s_m_m_dockwork_01`,
		coords = vector3(2960.1689453125, 2850.9709472656, 47.5), -- (Mining Start)
		heading = 150.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `a_m_m_acult_01`,
		coords = vector3(1989.6379394531, 551.44866943359, 161.08541870117), -- (Mining Wash)
		heading = 69.555519104004, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `mp_m_weed_01`,
		coords = vector3(-1612.7983398438, 5262.236328125, 3.9741015434265), -- (Boat Rental)
		heading = 205.71180725098, 
		gender = "male", 
		animName = "WORLD_HUMAN_STAND_IMPATIENT_UPRIGHT",
	},

	{
		model = `a_m_m_fatlatin_01`,
		coords = vector3(-415.16616821289, 6327.9741210938, 28.763023376465), -- (Crack Sell)
		heading = 38.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_AA_SMOKE",
	},

	{
		model = `cs_lestercrest`,
		coords = vector3(1002.3510131836, -1527.7473144531, 30.837219238281), -- (Secret Shopper)
		heading = 176.01057434082, 
		gender = "male", 
		animName = "WORLD_HUMAN_STAND_IMPATIENT_UPRIGHT",
	},

	{
		model = `a_m_m_beach_01`,
		coords = vector3(-3248.1921386719, 996.18127441406, 12.48281955719), -- (Make Sushi)
		heading = 173.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_SMOKING_POT",
	},

	{
		model = `a_m_m_beach_01`,
		coords = vector3(-1842.1589355469, -1199.2922363281, 14.304753303528), -- (Sell Sushi)
		heading = 240.84646606445, 
		gender = "male", 
		animName = "WORLD_HUMAN_SMOKING_POT",
	},

	{
		model = `s_m_m_pilot_02`,
		coords = vector3(355.17, -580.54, 74.16), -- (Spawn EMS Heli)
		heading = 157.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `s_m_y_baywatch_01`,
		coords = vector3(-807.18933105469, -1497.119140625, 1.5952169895172), -- (Spawn PD Boat)
		heading = 292.89428710938, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `mp_f_bennymech_01`,
		coords = vector3(340.51556396484, -582.76434326172, 28.8), -- (Spawn EMS Cars)
		heading = 79.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `s_m_y_pilot_01`,
		coords = vector3(444.77874755859, -976.54058837891, 43.7), -- (Spawn PD Heli)
		heading = 222.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `ig_benny`,
		coords = vector3(445.8518371582, -973.31311035156, 25.699968338013), -- (Spawn PD Cars)
		heading = 182.0, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `cs_lamardavis`,
		coords = vector3(69.015975952148, -1569.9675292969, 29.597764968872), -- (Oxy Run)
		heading = 52.164821624756, 
		gender = "male", 
		animName = "WORLD_HUMAN_SMOKING_POT",
	},

	{
		model = `csb_trafficwarden`,
		coords = vector3(2415.2165527344, 2505.9575195312, 45.052883148193), -- (PaintBall Shop)
		heading = 350.22979736328, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `s_m_m_dockwork_01`,
		coords = vector3(-322.13525390625, -1545.8961181641, 31.019910812378), -- (Mining Start)
		heading = 316.73941040039, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `u_m_y_imporage`,
		coords = vector3(-143.71520996094, 229.64819335938, 94.93578338623), -- (Comic Shop)
		heading = 3.0167455673218, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `a_m_m_fatlatin_01`,
		coords = vector3(-2253.4936523438, 233.62142944336, 174.60693359375), -- (Laptop spot)
		heading = 355.94186401367, 
		gender = "male", 
		animName = "WORLD_HUMAN_AA_SMOKE",
	},

	{
		model = `s_m_y_armymech_01`,
		coords = vector3(1884.9387207031, 3694.8522949219, 33.541885375977), -- (Spawn Sandy PD Cars)
		heading = 83.176, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `cs_floyd`,
		coords = vector3(109.48143005371, -1090.4381103516, 29.302499771118), -- (Car Rental PDM)
		heading = 349.48541259766, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},

	{
		model = `cs_floyd`,
		coords = vector3(1852.3791503906, 2582.0026855469, 45.67240524292), -- (Car Rental Prison)
		heading = 272.05682373047, 
		gender = "male", 
		animName = "WORLD_HUMAN_CLIPBOARD",
	},
}

local genderNum = 0
local isNearPed = false
local ped 
local hasAlreadyEntered = false


Citizen.CreateThread(function()
    local waitTime = 250
	while true do
		Citizen.Wait(waitTime)
		for k,v in pairs (pedList) do
			local playerCoords = GetEntityCoords(PlayerPedId())
			local dist = #(playerCoords - v.coords)
			if dist < 20.0 and hasAlreadyEntered == false then
				TriggerEvent('np-peds:nearPed', v.model, v.coords, v.heading, v.gender, v.animDict, v.animName)
				hasAlreadyEntered = true
			end

			if dist >= 25.0 and dist <= 45.0 then
                for i = 255, 0, -51 do
                    Citizen.Wait(50)
                    SetEntityAlpha(ped, i, false)
                end
				hasAlreadyEntered = false
				DeleteEntity(ped)
			end
		end
	end
end)

AddEventHandler('np-peds:nearPed', function(model, coords, heading, gender, animDict, animName)
	RequestModel(model)
	while not HasModelLoaded(model) do
		Citizen.Wait(250)
	end
	
	if gender == 'male' then
		genderNum = 4
	elseif gender == 'female' then 
		genderNum = 5
	end	

    local x, y, z = table.unpack(coords)
    ped = CreatePed(genderNum, model, x, y, z - 1, heading, false, true)
	SetEntityAlpha(ped, 0, false)
	
	FreezeEntityPosition(ped, true)

	SetEntityInvincible(ped, true)

	SetBlockingOfNonTemporaryEvents(ped, true)
	
	if animDict and animName then
		RequestAnimDict(animDict)
		while not HasAnimDictLoaded(animDict) do
			Citizen.Wait(1)
		end
		TaskPlayAnim(ped, animDict, animName, 8.0, 0, -1, 1, 0, 0, 0)
	elseif animName and not animDict then
		TaskStartScenarioInPlace(ped, animName, 0, true)
	end
	
    for i = 0, 255, 51 do
        Citizen.Wait(50)
        SetEntityAlpha(ped, i, false)
    end
end)